{"version":3,"file":"index-BH8IIIj_.js","sources":["../../node_modules/.pnpm/@material-ui+icons@1.1.1_@material-ui+core@1.5.1_react-dom@18.2.0_react@18.2.0__react@18.2.0__ahypxsorp4e7uzticfny52een4/node_modules/@material-ui/icons/KeyboardBackspace.js","../../node_modules/.pnpm/@material-ui+icons@1.1.1_@material-ui+core@1.5.1_react-dom@18.2.0_react@18.2.0__react@18.2.0__ahypxsorp4e7uzticfny52een4/node_modules/@material-ui/icons/PriorityHigh.js","../../src/components/Prime/PrimeManage.jsx","../../src/components/Prime/PrimeCheckout.jsx","../../src/components/Prime/index.jsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"g\", null, _react.default.createElement(\"path\", {\n  d: \"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z\"\n})), 'KeyboardBackspace');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"g\", null, _react.default.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"19\",\n  r: \"2\"\n}), _react.default.createElement(\"path\", {\n  d: \"M10 3h4v12h-4z\"\n})), 'PriorityHigh');\n\nexports.default = _default;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport dayjs from 'dayjs';\nimport * as Sentry from '@sentry/react';\n\nimport { withStyles, Typography, Button, Modal, Paper, IconButton, CircularProgress } from '@material-ui/core';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n\nimport { billing as Billing } from '@moretore/api';\nimport { deviceNamePretty, deviceTypePretty } from '../../utils';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\nimport { ErrorOutline, InfoOutline } from '../../icons';\nimport { primeNav, primeGetSubscription, analyticsEvent } from '../../actions';\n\nconst styles = (theme) => ({\n  primeBox: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  primeContainer: {\n    borderBottom: `1px solid ${Colors.white10}`,\n    color: '#fff',\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  overviewBlock: {\n    marginTop: 20,\n  },\n  overviewBlockError: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockSuccess: {\n    marginTop: 15,\n    padding: 10,\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 255, 0, 0.2)',\n    '& p': {\n      display: 'inline-block',\n      marginLeft: 10,\n      '&:first-child': { fontWeight: 600 },\n    },\n  },\n  overviewBlockLoading: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockDisabled: {\n    marginTop: 12,\n    borderRadius: 12,\n    padding: '8px 12px',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: Colors.white08,\n    '& p': { display: 'inline-block', marginLeft: 10 },\n    '& a': { color: 'white' },\n  },\n  manageItem: {\n    marginLeft: 10,\n    '& span': {\n      color: Colors.white70,\n      fontSize: '0.9em',\n    },\n  },\n  buttons: {\n    marginTop: 10,\n    background: Colors.white,\n    borderRadius: 18,\n    color: Colors.grey900,\n    textTransform: 'none',\n    width: 220,\n    '&:hover': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n    '&:disabled': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n    '&:disabled:hover': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n  },\n  cancelButton: {\n    color: Colors.white,\n    background: 'transparent',\n    border: `1px solid ${Colors.grey500}`,\n    '&:hover': {\n      backgroundColor: Colors.white10,\n      color: Colors.white,\n    },\n    '&:disabled': {\n      backgroundColor: 'transparent',\n      color: Colors.grey500,\n    },\n    '&:disabled:hover': {\n      backgroundColor: 'transparent',\n      color: Colors.grey500,\n    },\n  },\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    '& p': {\n      marginTop: 10,\n    },\n  },\n  closeButton: {\n    marginTop: 10,\n    float: 'right',\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  cancelModalButton: {\n    width: 170,\n    marginTop: 10,\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n    '&:disabled': {\n      backgroundColor: Colors.grey400,\n    },\n    '&:disabled:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  cancelError: {\n    backgroundColor: 'rgba(255, 0, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  cancelSuccess: {\n    backgroundColor: 'rgba(0, 255, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  paymentElement: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    maxWidth: 450,\n  },\n});\n\nclass PrimeManage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      cancelError: null,\n      cancelModal: false,\n      canceling: false,\n      stripeStatus: null,\n      windowWidth: window.innerWidth,\n    };\n\n    this.cancelPrime = this.cancelPrime.bind(this);\n    this.fetchStripeSession = this.fetchStripeSession.bind(this);\n    this.gotoUpdate = this.gotoUpdate.bind(this);\n    this.fetchSubscription = this.fetchSubscription.bind(this);\n    this.onResize = this.onResize.bind(this);\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate({}, {});\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { subscription } = this.props;\n    const { stripeStatus } = this.state;\n\n    if (!prevProps.stripeSuccess && this.props.stripeSuccess) {\n      this.setState({\n        stripeStatus: { sessionId: this.props.stripeSuccess, loading: true, paid: null },\n      }, this.fetchStripeSession);\n    }\n\n    if ((subscription?.user_id && prevState.stripeStatus?.paid !== 'paid' && stripeStatus?.paid === 'paid')\n      || (stripeStatus?.paid === 'paid' && !prevProps.subscription?.user_id && subscription?.user_id)) {\n      this.props.dispatch(analyticsEvent('prime_paid', { plan: subscription.plan }));\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  cancelPrime() {\n    this.setState({ canceling: true });\n    this.props.dispatch(analyticsEvent('prime_cancel', { plan: this.props.subscription.plan }));\n    Billing.cancelPrime(this.props.dongleId).then((resp) => {\n      if (resp.success) {\n        this.setState({ canceling: false, cancelError: null, cancelSuccess: 'Cancelled subscription.' });\n        this.fetchSubscription();\n      } else if (resp.error) {\n        this.setState({ canceling: false, cancelError: resp.description });\n      } else {\n        this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.' });\n      }\n    }).catch((err) => {\n      Sentry.captureException(err, { fingerprint: 'primemanage_cancel_prime' });\n      this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.' });\n    });\n  }\n\n  async gotoUpdate() {\n    this.props.dispatch(analyticsEvent('prime_stripe_update', { plan: this.props.subscription.plan }));\n    try {\n      const resp = await Billing.getStripePortal(this.props.dongleId);\n      window.location = resp.url;\n    } catch (err) {\n      // TODO show error messages\n      console.error(err);\n      Sentry.captureException(err, { fingerprint: 'prime_goto_stripe_update' });\n    }\n  }\n\n  async fetchStripeSession() {\n    const { dongleId } = this.props;\n    const { stripeStatus } = this.state;\n    if (!stripeStatus || !this.mounted) {\n      return;\n    }\n\n    try {\n      const resp = await Billing.getStripeSession(dongleId, stripeStatus.sessionId);\n      const status = resp.payment_status;\n      this.setState({ stripeStatus: {\n        ...stripeStatus,\n        paid: status,\n        loading: status !== 'paid',\n      } });\n      if (status === 'paid') {\n        this.fetchSubscription(true);\n      } else {\n        setTimeout(this.fetchStripeSession, 2000);\n      }\n    } catch (err) {\n      // TODO error handling\n      console.error(err);\n      Sentry.captureException(err, { fingerprint: 'prime_fetch_stripe_session' });\n    }\n  }\n\n  async fetchSubscription(repeat = false) {\n    const { dongleId } = this.props;\n    if (!this.mounted) {\n      return;\n    }\n    try {\n      const subscription = await Billing.getSubscription(dongleId);\n      if (subscription.user_id) {\n        this.props.dispatch(primeGetSubscription(dongleId, subscription));\n      } else {\n        setTimeout(() => this.fetchSubscription(true), 2000);\n      }\n    } catch (err) {\n      if (err.message && err.message.indexOf('404') === 0) {\n        if (repeat) {\n          setTimeout(() => this.fetchSubscription(true), 2000);\n        }\n      } else {\n        console.error(err);\n        Sentry.captureException(err, { fingerprint: 'prime_fetch_subscription' });\n      }\n    }\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  render() {\n    const { dispatch, dongleId, subscription, classes, device } = this.props;\n    const { windowWidth, stripeStatus } = this.state;\n\n    const hasPrimeSub = subscription && subscription.user_id;\n\n    if (!hasPrimeSub && !stripeStatus) {\n      return null;\n    }\n\n    let joinDate;\n    let nextPaymentDate;\n    let cancelAtDate;\n    let planName;\n    let planSubtext;\n    if (hasPrimeSub) {\n      joinDate = dayjs(subscription.subscribed_at ? subscription.subscribed_at * 1000 : 0).format('MMMM D, YYYY');\n      nextPaymentDate = dayjs(subscription.next_charge_at ? subscription.next_charge_at * 1000 : 0).format('MMMM D, YYYY');\n      cancelAtDate = dayjs(subscription.cancel_at ? subscription.cancel_at * 1000 : 0).format('MMMM D, YYYY');\n      planName = subscription.plan === 'nodata' ? 'Lite' : 'Standard';\n      planSubtext = subscription.plan === 'nodata' ? '(without data plan)' : '(with data plan)';\n    }\n\n    const hasCancelAt = Boolean(hasPrimeSub && subscription.cancel_at && subscription.cancel_at <= subscription.next_charge_at);\n    const alias = deviceNamePretty(device);\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n    const buttonSmallStyle = windowWidth < 514 ? { width: '100%' } : {};\n\n    return (\n      <>\n        <ResizeHandler onResize={this.onResize} />\n        <div className={classes.primeBox}>\n          <div className={classes.primeContainer} style={{ padding: `8px ${containerPadding}px` }}>\n            <IconButton aria-label=\"Go Back\" onClick={() => dispatch(primeNav(false))}>\n              <KeyboardBackspaceIcon />\n            </IconButton>\n          </div>\n          <div className={classes.primeContainer} style={{ padding: `16px ${containerPadding}px` }}>\n            <Typography variant=\"title\">comma prime</Typography>\n            {stripeStatus && (\n              <>\n                {stripeStatus.paid !== 'paid'\n                  && (\n                    <div className={classes.overviewBlockLoading}>\n                      <CircularProgress size={19} style={{ color: Colors.white }} />\n                      <Typography>Waiting for confirmed payment</Typography>\n                    </div>\n                  )}\n                {Boolean(stripeStatus.paid === 'paid' && !hasPrimeSub)\n                  && (\n                    <div className={classes.overviewBlockLoading}>\n                      <CircularProgress size={19} style={{ color: Colors.white }} />\n                      <Typography>Processing subscription</Typography>\n                    </div>\n                  )}\n                {Boolean(stripeStatus.paid === 'paid' && hasPrimeSub)\n                  && (\n                    <div className={classes.overviewBlockSuccess}>\n                      <Typography>comma prime activated</Typography>\n                      {subscription.is_prime_sim && (\n                        <Typography>\n                          Connectivity will be enabled as soon as activation propagates to your\n                          local cell tower. Rebooting your device may help.\n                        </Typography>\n                      )}\n                    </div>\n                  )}\n              </>\n            )}\n            <div className={classes.overviewBlock}>\n              <Typography variant=\"subheading\">Device</Typography>\n              <div className={classes.manageItem}>\n                <Typography variant=\"body2\">{alias}</Typography>\n                <Typography variant=\"caption\" className={classes.deviceId}>\n                  {`(${device.dongle_id})`}\n                </Typography>\n              </div>\n            </div>\n            {hasPrimeSub && (\n              <>\n                <div className={classes.overviewBlock}>\n                  <Typography variant=\"subheading\">Plan</Typography>\n                  <Typography className={classes.manageItem}>\n                    {planName}\n                    <span>{` ${planSubtext}`}</span>\n                  </Typography>\n                </div>\n                <div className={classes.overviewBlock}>\n                  <Typography variant=\"subheading\">Joined</Typography>\n                  <Typography className={classes.manageItem}>{joinDate}</Typography>\n                </div>\n                {!hasCancelAt\n                  && (\n                    <div className={classes.overviewBlock}>\n                      <Typography variant=\"subheading\">Next payment</Typography>\n                      <Typography className={classes.manageItem}>{nextPaymentDate}</Typography>\n                    </div>\n                  )}\n                {hasCancelAt\n                  && (\n                    <div className={classes.overviewBlock}>\n                      <Typography variant=\"subheading\">Subscription end</Typography>\n                      <Typography className={classes.manageItem}>{cancelAtDate}</Typography>\n                    </div>\n                  )}\n                <div className={classes.overviewBlock}>\n                  <Typography variant=\"subheading\">Amount</Typography>\n                  <Typography className={classes.manageItem}>\n                    {`$${(subscription.amount / 100).toFixed(2)}`}\n                  </Typography>\n                </div>\n                {this.state.error && (\n                  <div className={classes.overviewBlockError}>\n                    <ErrorOutline />\n                    <Typography>{this.state.error}</Typography>\n                  </div>\n                )}\n                <div className={`${classes.overviewBlock} ${classes.paymentElement}`}>\n                  <Button\n                    className={classes.buttons}\n                    style={buttonSmallStyle}\n                    onClick={this.gotoUpdate}\n                    disabled={!hasPrimeSub || (hasCancelAt && !device.eligible_features?.prime_data && subscription.plan === 'data')}\n                  >\n                    {hasCancelAt ? 'Renew subscription' : 'Update payment method'}\n                  </Button>\n                  {!hasCancelAt\n                    && (\n                      <Button\n                        className={`${classes.buttons} ${classes.cancelButton} primeCancel`}\n                        style={buttonSmallStyle}\n                        onClick={() => this.setState({ cancelModal: true })}\n                        disabled={Boolean(!hasPrimeSub)}\n                      >\n                        Cancel subscription\n                      </Button>\n                    )}\n                </div>\n                {hasPrimeSub && subscription.requires_migration\n                  && (\n                    <div className={classes.overviewBlockDisabled}>\n                      <PriorityHighIcon />\n                      <Typography>\n                        Your prime subscription will be canceled on May 15th unless you replace the\n                        SIM\n                        card in your device. A new SIM card can be ordered from the\n                        <a href=\"https://comma.ai/shop/comma-prime-sim\">shop</a>\n                        .\n                        Use discount code SIMSWAP at checkout to receive a free SIM card.\n                      </Typography>\n                    </div>\n                  )}\n                {hasCancelAt && !device.eligible_features?.prime_data && subscription.plan === 'data'\n                  && (\n                    <div className={classes.overviewBlockDisabled}>\n                      <InfoOutline />\n                      <Typography>\n                        Standard comma prime discontinued for\n                        {deviceTypePretty(device.device_type)}\n                      </Typography>\n                    </div>\n                  )}\n              </>\n            )}\n          </div>\n        </div>\n        <Modal\n          open={this.state.cancelModal}\n          onClose={() => this.setState({ cancelModal: false })}\n        >\n          <Paper className={classes.modal}>\n            <Typography variant=\"title\">Cancel prime subscription</Typography>\n            {this.state.cancelError && (\n              <div className={classes.cancelError}>\n                <Typography>{this.state.cancelError}</Typography>\n              </div>\n            )}\n            {this.state.cancelSuccess && (\n              <div className={classes.cancelSuccess}>\n                <Typography>{this.state.cancelSuccess}</Typography>\n              </div>\n            )}\n            <Typography>\n              {`Device: ${alias} (${dongleId})`}\n            </Typography>\n            <Typography>\n              We&apos;re sorry to see you go.\n            </Typography>\n            <Typography>\n              Your subscription will be cancelled immediately and can be resumed at any time.\n            </Typography>\n            <Button\n              variant=\"contained\"\n              className={`${classes.cancelModalButton} primeModalCancel`}\n              onClick={this.cancelPrime}\n              disabled={Boolean(this.state.cancelSuccess || this.state.canceling)}\n            >\n              {this.state.canceling\n                ? <CircularProgress size={19} style={{ color: Colors.white }} />\n                : 'Cancel subscription'}\n            </Button>\n            <Button\n              variant=\"contained\"\n              className={`${classes.closeButton} primeModalClose`}\n              onClick={() => this.setState({ cancelModal: false })}\n            >\n              Close\n            </Button>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'dongleId',\n  device: 'device',\n  subscription: 'subscription',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeManage));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport dayjs from 'dayjs';\nimport * as Sentry from '@sentry/react';\nimport { withStyles, Typography, IconButton, Button, CircularProgress } from '@material-ui/core';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\nimport CheckIcon from '@material-ui/icons/Check';\n\nimport { billing as Billing } from '@moretore/api';\n\nimport { deviceNamePretty } from '../../utils';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\nimport { primeNav, analyticsEvent } from '../../actions';\nimport { ErrorOutline, InfoOutline } from '../../icons';\n\nconst styles = () => ({\n  primeBox: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: 430,\n    color: '#fff',\n  },\n  primeHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    maxWidth: 410,\n    flexDirection: 'row',\n  },\n  headerDevice: {\n    display: 'flex',\n    alignItems: 'center',\n    '& :first-child': { marginRight: 8 },\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  moreInfoContainer: {\n    '& p': { display: 'inline' },\n    '& button': { display: 'inline', marginLeft: '15px' },\n  },\n  deviceId: {\n    color: '#525E66',\n  },\n  leftMargin: {\n    marginLeft: 10,\n  },\n  deviceBlock: {\n    marginLeft: 10,\n    '& aside': { display: 'inline', marginRight: 5 },\n    '& span': { display: 'inline' },\n  },\n  overviewBlockError: {\n    borderRadius: 12,\n    marginTop: 8,\n    padding: '8px 12px',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockDisabled: {\n    marginTop: 12,\n    borderRadius: 12,\n    padding: '8px 12px',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: Colors.white08,\n    '& p': { display: 'inline-block', marginLeft: 10 },\n    '& a': { color: Colors.white },\n  },\n  chargeText: {\n    fontSize: 13,\n  },\n  buttons: {\n    width: '100%',\n    height: 42,\n    borderRadius: 21,\n    background: Colors.white,\n    color: Colors.grey900,\n    textTransform: 'none',\n    '&:hover': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n    '&:disabled': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n    '&:disabled:hover': {\n      backgroundColor: Colors.white70,\n      color: Colors.grey900,\n    },\n  },\n  checkList: {\n    marginLeft: 12,\n  },\n  checkListItem: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: 4,\n    '& svg': {\n      alignSelf: 'flex-start',\n      fontSize: 21,\n    },\n    '& p': {\n      fontSize: 14,\n      margin: '0 0 0 14px',\n    },\n    '& span': {\n      color: Colors.white70,\n      fontSize: 12,\n    },\n  },\n  learnMore: {\n    '& a': { color: 'white' },\n  },\n  primeTitle: {\n    margin: '0 12px',\n  },\n  planBox: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    height: 140,\n  },\n  planBoxContainer: {\n    position: 'relative',\n    marginLeft: -6,\n    marginRight: -6,\n  },\n  plan: {\n    cursor: 'pointer',\n    WebkitTapHighlightColor: 'transparent',\n    width: 160,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    border: '2px solid transparent',\n    backgroundColor: Colors.white10,\n    padding: '8px 0',\n    borderRadius: 18,\n    fontWeight: 600,\n    textAlign: 'center',\n    position: 'relative',\n    '&:first-child': { marginRight: 2 },\n    '&:last-child': { marginLeft: 2 },\n    '& p': {\n      margin: 0,\n    },\n  },\n  planName: {\n    fontSize: '1.2rem',\n  },\n  planPrice: {\n    fontSize: '1.5rem',\n  },\n  planSubtext: {\n    fontWeight: 'normal',\n    fontSize: '0.8rem',\n  },\n  planDisabled: {\n    backgroundColor: Colors.white05,\n    color: Colors.white40,\n    cursor: 'default',\n  },\n  planInfoLoading: {\n    backgroundColor: Colors.white03,\n    color: Colors.white20,\n    cursor: 'default',\n  },\n  planLoading: {\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 140,\n    '& p': {\n      marginTop: 10,\n      fontSize: '0.9rem',\n    },\n  },\n});\n\nclass PrimeCheckout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      loadingCheckout: false,\n      selectedPlan: null,\n      windowWidth: window.innerWidth,\n      windowHeight: window.innerHeight,\n    };\n\n    this.gotoCheckout = this.gotoCheckout.bind(this);\n    this.trialClaimable = this.trialClaimable.bind(this);\n    this.dataPlanAvailable = this.dataPlanAvailable.bind(this);\n    this.onResize = this.onResize.bind(this);\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate({});\n  }\n\n  componentDidUpdate(prevProps) {\n    const { stripeCancelled, subscribeInfo } = this.props;\n    if (!prevProps.stripeCancelled && stripeCancelled) {\n      this.setState({ error: 'Checkout cancelled' });\n    }\n\n    if (this.state.selectedPlan === null && subscribeInfo) {\n      const plan = this.dataPlanAvailable() ? 'data' : 'nodata';\n      this.setState({ selectedPlan: plan });\n    }\n  }\n\n  onResize(windowWidth, windowHeight) {\n    this.setState({ windowWidth, windowHeight });\n  }\n\n  async gotoCheckout() {\n    const { dispatch, dongleId, subscribeInfo } = this.props;\n    this.setState({ loadingCheckout: true });\n    try {\n      const { selectedPlan: plan } = this.state;\n      const resp = await Billing.getStripeCheckout(\n        dongleId,\n        subscribeInfo.sim_id,\n        plan,\n      );\n      dispatch(analyticsEvent('prime_checkout', { plan }));\n      window.location = resp.url;\n    } catch (err) {\n      // TODO show error messages\n      console.error(err);\n      Sentry.captureException(err, { fingerprint: 'prime_goto_stripe_checkout' });\n    }\n  }\n\n  dataPlanAvailable() {\n    const { device, subscribeInfo } = this.props;\n    if (!device || !subscribeInfo) {\n      return null;\n    }\n\n    return Boolean(\n      device.eligible_features?.prime_data\n      && subscribeInfo\n      && subscribeInfo.sim_id\n      && subscribeInfo.is_prime_sim\n      && subscribeInfo.sim_usable !== false\n      && ['blue', 'magenta_new', 'webbing'].includes(subscribeInfo.sim_type),\n    );\n  }\n\n  trialClaimable() {\n    const { subscribeInfo } = this.props;\n    const { selectedPlan } = this.state;\n    if (!subscribeInfo) {\n      return null;\n    }\n    if (selectedPlan === 'data') {\n      return Boolean(subscribeInfo.trial_end_data);\n    }\n    if (selectedPlan === 'nodata') {\n      return Boolean(subscribeInfo.trial_end_nodata);\n    }\n    return Boolean(subscribeInfo.trial_end_data && subscribeInfo.trial_end_nodata);\n  }\n\n  render() {\n    const { classes, dispatch, device, subscribeInfo } = this.props;\n    const { windowWidth, windowHeight, error, loadingCheckout, selectedPlan } = this.state;\n\n    let chargeText = null;\n    if (selectedPlan && this.trialClaimable()) {\n      let trialEndDate = null;\n      if (selectedPlan === 'data') {\n        trialEndDate = dayjs(subscribeInfo.trial_end_data * 1000).format('MMMM D');\n      } else if (selectedPlan === 'nodata') {\n        trialEndDate = dayjs(subscribeInfo.trial_end_nodata * 1000).format('MMMM D');\n      }\n      chargeText = `Your first charge will be on ${trialEndDate}, then monthly thereafter.`;\n    }\n\n    const containerPadding = windowWidth > 520 ? { margin: '18px 24px' } : { margin: '6px 12px' };\n    const blockMargin = windowWidth > 520 ? { marginTop: 24 } : { marginTop: 8 };\n    const paddingStyle = windowWidth > 520\n      ? { paddingLeft: 7, paddingRight: 7 }\n      : { paddingLeft: 8, paddingRight: 8 };\n    const selectedStyle = { border: '2px solid white' };\n    const plansLoadingClass = !subscribeInfo ? classes.planInfoLoading : '';\n    const disabledDataPlan = Boolean(!subscribeInfo || !this.dataPlanAvailable());\n    const boxHeight = windowHeight > 600 ? { height: 140 } : { height: 110 };\n\n    let disabledDataPlanText;\n    if (subscribeInfo && disabledDataPlan) {\n      if (!device.eligible_features?.prime_data) {\n        disabledDataPlanText = 'Standard plan is not available for your device.';\n      } else if (!subscribeInfo.sim_id && subscribeInfo.device_online) {\n        disabledDataPlanText = 'Standard plan not available, no SIM was detected. Ensure SIM is securely inserted and try again.';\n      } else if (!subscribeInfo.sim_id) {\n        disabledDataPlanText = 'Standard plan not available, device could not be reached. Connect device to the internet and try again.';\n      } else if (!subscribeInfo.is_prime_sim) {\n        disabledDataPlanText = 'Standard plan not available, detected a third-party SIM.';\n      } else if (!['blue', 'magenta_new', 'webbing'].includes(subscribeInfo.sim_type)) {\n        disabledDataPlanText = ['Standard plan not available, old SIM type detected, new SIM cards are available in the ',\n          <a key={1} href=\"https://comma.ai/shop/comma-prime-sim\">shop</a>];\n      } else if (subscribeInfo.sim_usable === false && subscribeInfo.sim_type === 'blue') {\n        disabledDataPlanText = ['Standard plan not available, SIM has been canceled and is therefore no longer usable, new SIM cards are available in the ',\n          <a key={1} href=\"https://comma.ai/shop/comma-prime-sim\">shop</a>];\n      } else if (subscribeInfo.sim_usable === false) {\n        disabledDataPlanText = ['Standard plan not available, SIM is no longer usable, new SIM cards are available in the ',\n          <a key={1} href=\"https://comma.ai/shop/comma-prime-sim\">shop</a>];\n      }\n    }\n\n    return (\n      <div className={ classes.primeBox } style={ containerPadding }>\n        <ResizeHandler onResize={this.onResize} />\n        <div className={ classes.primeHeader }>\n          <IconButton aria-label=\"Go Back\" onClick={() => dispatch(primeNav(false)) }>\n            <KeyboardBackspaceIcon />\n          </IconButton>\n          <div className={ classes.headerDevice }>\n            <Typography variant=\"body2\">{deviceNamePretty(device)}</Typography>\n            <Typography variant=\"caption\" className={classes.deviceId}>{`(${device.dongle_id})`}</Typography>\n          </div>\n        </div>\n        <h2 className={ classes.primeTitle }>comma prime</h2>\n        <div style={ blockMargin }>\n          <div className={ classes.checkList }>\n            <div className={ classes.checkListItem } style={ paddingStyle }>\n              <CheckIcon />\n              <p>24/7 connectivity</p>\n            </div>\n            <div className={ classes.checkListItem } style={ paddingStyle }>\n              <CheckIcon />\n              <p>Take pictures remotely</p>\n            </div>\n            <div className={ classes.checkListItem } style={ paddingStyle }>\n              <CheckIcon />\n              <p>1 year storage of drive videos</p>\n            </div>\n            <div className={ classes.checkListItem } style={ paddingStyle }>\n              <CheckIcon />\n              <p>Simple SSH for developers</p>\n            </div>\n            <div className={ classes.checkListItem } style={ paddingStyle }>\n              <CheckIcon />\n              <p>\n                Turn-by-turn navigation\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className={ classes.planBoxContainer } style={ blockMargin }>\n          <div className={ classes.planBox } style={ boxHeight }>\n            <div\n              className={ `${classes.plan} ${plansLoadingClass}` }\n              style={ selectedPlan === 'nodata' ? selectedStyle : {} }\n              onClick={ subscribeInfo ? () => this.setState({ selectedPlan: 'nodata' }) : null }\n            >\n              <p className={ classes.planName }>lite</p>\n              <p className={ classes.planPrice }>$10/month</p>\n              <p className={ classes.planSubtext }>\n                bring your own\n                <br />\n                sim card\n              </p>\n            </div>\n            <div\n              className={ `${classes.plan} ${disabledDataPlan ? classes.planDisabled : ''} ${plansLoadingClass}` }\n              style={ selectedPlan === 'data' ? selectedStyle : {} }\n              onClick={ !disabledDataPlan ? () => this.setState({ selectedPlan: 'data' }) : null }\n            >\n              <p className={ classes.planName }>standard</p>\n              <p className={ classes.planPrice }>$24/month</p>\n              <p className={ classes.planSubtext }>\n                including data plan\n                <br />\n                only offered in the U.S.\n              </p>\n            </div>\n          </div>\n          { !subscribeInfo\n            && (\n            <div className={ classes.planLoading }>\n              <CircularProgress size={ 38 } style={{ color: Colors.white }} />\n              <Typography>Fetching SIM data</Typography>\n            </div>\n            )}\n        </div>\n        { disabledDataPlanText && (\n        <div className={ classes.overviewBlockDisabled } style={ blockMargin }>\n          <InfoOutline />\n          <Typography>{ disabledDataPlanText }</Typography>\n        </div>\n        ) }\n        <div style={ blockMargin }>\n          <Typography className={ classes.learnMore }>\n            {'Learn more about comma prime from our '}\n            <a target=\"_blank\" href=\"https://comma.ai/connect#faq\" rel=\"noreferrer\">FAQ</a>\n          </Typography>\n        </div>\n        { error && (\n        <div className={ classes.overviewBlockError }>\n          <ErrorOutline />\n          <Typography>{ error }</Typography>\n        </div>\n        ) }\n        <div style={ blockMargin }>\n          <Button\n            className={ `${classes.buttons} gotoCheckout` }\n            onClick={ () => this.gotoCheckout() }\n            disabled={ Boolean(!subscribeInfo || loadingCheckout || !selectedPlan) }\n          >\n            { loadingCheckout\n              ? <CircularProgress size={ 19 } />\n              : (this.trialClaimable() ? 'Claim trial' : 'Go to checkout')}\n          </Button>\n        </div>\n        { chargeText\n          && (\n          <div style={ blockMargin }>\n            <Typography className={ classes.chargeText }>{ chargeText }</Typography>\n          </div>\n          )}\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'dongleId',\n  device: 'device',\n  subscribeInfo: 'subscribeInfo',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeCheckout));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport qs from 'query-string';\n\nimport { Typography } from '@material-ui/core';\nimport PrimeManage from './PrimeManage';\nimport PrimeCheckout from './PrimeCheckout';\n\nconst Prime = (props) => {\n  let stripeCancelled;\n  let stripeSuccess;\n  if (window.location) {\n    const params = qs.parse(window.location.search);\n    stripeCancelled = params.stripe_cancelled;\n    stripeSuccess = params.stripe_success;\n  }\n\n  const { device, profile } = props;\n  if (!profile) {\n    return null;\n  }\n\n  if (!device.is_owner && !profile.superuser) {\n    return (<Typography>No access</Typography>);\n  }\n  if (device.prime || stripeSuccess) {\n    return (<PrimeManage stripeSuccess={ stripeSuccess } />);\n  }\n  return (<PrimeCheckout stripeCancelled={ stripeCancelled } />);\n};\n\nconst stateToProps = Obstruction({\n  subscription: 'subscription',\n  device: 'device',\n  profile: 'profile',\n});\n\nexport default connect(stateToProps)(Prime);\n"],"names":["_interopRequireDefault","require$$0","KeyboardBackspace","default_1","_react","require$$1","_createSvgIcon","require$$2","_default","PriorityHigh","styles","theme","Colors","PrimeManage","Component","props","prevProps","prevState","subscription","stripeStatus","_a","_b","analyticsEvent","Billing.cancelPrime","resp","err","Sentry.captureException","Billing.getStripePortal","dongleId","status","Billing.getStripeSession","repeat","Billing.getSubscription","primeGetSubscription","windowWidth","dispatch","classes","device","hasPrimeSub","joinDate","nextPaymentDate","cancelAtDate","planName","planSubtext","dayjs","hasCancelAt","alias","deviceNamePretty","containerPadding","buttonSmallStyle","jsxs","Fragment","jsx","ResizeHandler","IconButton","primeNav","KeyboardBackspaceIcon","Typography","CircularProgress","ErrorOutline","Button","PriorityHighIcon","InfoOutline","deviceTypePretty","Modal","Paper","stateToProps","Obstruction","PrimeManage$1","connect","withStyles","PrimeCheckout","stripeCancelled","subscribeInfo","plan","windowHeight","Billing.getStripeCheckout","selectedPlan","error","loadingCheckout","chargeText","trialEndDate","blockMargin","paddingStyle","selectedStyle","plansLoadingClass","disabledDataPlan","boxHeight","disabledDataPlanText","CheckIcon","PrimeCheckout$1","Prime","stripeSuccess","params","qs","profile","index"],"mappings":"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","x_google_ignoreList":[0,1]}